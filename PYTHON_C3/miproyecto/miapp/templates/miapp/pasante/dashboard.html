{% extends 'miapp/base.html' %}

{% block title %}Dashboard Pasante - SoulComfort{% endblock %}

{% block content %}
<div class="container py-5 mt-5">
    <div class="row">
        <div class="col-12">
            <!-- Header Mejorado -->
            <div class="text-center mb-5">
                <h1 class="display-5 fw-bold text-primary mb-3">
                    Dashboard Pasante
                </h1>
                <p class="lead text-muted">Gestiona recursos, consultas y contenido personalizado para los pacientes</p>
                <div class="welcome-badge bg-primary text-white">
                    Panel de Control - SoulComfort
                </div>
            </div>

            <!-- Estadísticas Mejoradas -->
            <div class="row mb-5">
                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="card feature-card h-100">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <i class="fas fa-book fa-3x text-success"></i>
                            </div>
                            <h5 class="card-title text-success mb-2">Total Recursos</h5>
                            <div class="display-6 fw-bold text-gray-800 mb-2">{{ stats.total_recursos }}</div>
                            <p class="text-muted small">Recursos creados</p>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="card feature-card h-100">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <i class="fas fa-toolbox fa-3x text-purple"></i>
                            </div>
                            <h5 class="card-title text-purple mb-2">Total Herramientas</h5>
                            <div class="display-6 fw-bold text-gray-800 mb-2">{{ stats.total_herramientas }}</div>
                            <p class="text-muted small">Archivos en el Kit</p>
                        </div>
                    </div>
                </div>    

                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="card feature-card h-100">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <i class="fas fa-envelope fa-3x text-warning"></i>
                            </div>
                            <h5 class="card-title text-warning mb-2">Total Consultas</h5>
                            <div class="display-6 fw-bold text-gray-800 mb-2">{{ stats.total_consultas }}</div>
                            <p class="text-muted small">Consultas recibidas</p>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="card feature-card h-100">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <i class="fas fa-clock fa-3x text-danger"></i>
                            </div>
                            <h5 class="card-title text-danger mb-2">Consultas Pendientes</h5>
                            <div class="display-6 fw-bold text-gray-800 mb-2">{{ stats.consultas_sin_responder }}</div>
                            <p class="text-muted small">Por responder</p>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="card feature-card h-100">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <i class="fas fa-chart-bar fa-3x text-primary"></i>
                            </div>
                            <h5 class="card-title text-primary mb-2">Tests Completados</h5>
                            <div class="display-6 fw-bold text-gray-800 mb-2">{{ stats.total_tests|default:"8" }}</div>
                            <p class="text-muted small">Evaluaciones</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tarjeta de Gestión de Citas - ANCHO COMPLETO -->
            <div class="col-12 mb-4">
                <div class="card feature-card">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0">
                            <i class="fas fa-calendar-check me-2"></i>
                            Gestión de Citas y Sesiones Virtuales
                        </h4>
                    </div>
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <p class="mb-3">
                                    Gestiona tu disponibilidad semanal y agenda citas con pacientes para sesiones de terapia virtual. 
                                    El sistema encuentra horarios coincidentes entre tu disponibilidad y la de los pacientes.
                                </p>
                                <div class="row">
                                    <div class="col-md-6 mb-2">
                                        <i class="fas fa-check-circle text-success me-2"></i>
                                        <strong>Disponibilidad Semanal</strong>
                                    </div>
                                    <div class="col-md-6 mb-2">
                                        <i class="fas fa-check-circle text-success me-2"></i>
                                        <strong>Horarios Coincidentes</strong>
                                    </div>
                                    <div class="col-md-6 mb-2">
                                        <i class="fas fa-check-circle text-success me-2"></i>
                                        <strong>Sesiones de 1 Hora</strong>
                                    </div>
                                    <div class="col-md-6 mb-2">
                                        <i class="fas fa-check-circle text-success me-2"></i>
                                        <strong>Videollamada Segura</strong>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 text-center">
                                <div class="mb-3">
                                    <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center" 
                                        style="width: 100px; height: 100px;">
                                        <i class="fas fa-video text-white fa-3x"></i>
                                    </div>
                                </div>
                                <div class="btn-group-vertical w-100">
                                    <a href="{% url 'miapp:gestionar_disponibilidad_pasante' %}" class="btn btn-primary mb-2">
                                        <i class="fas fa-clock me-2"></i>Gestionar Disponibilidad
                                    </a>
                                    <a href="{% url 'miapp:agendar_cita' %}" class="btn btn-success">
                                        <i class="fas fa-calendar-plus me-2"></i>Agendar Citas
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Acciones Rápidas - Sección 1 -->
            <div class="row mb-5">
                <div class="col-12">
                    <div class="card feature-card">
                        <div class="card-header bg-primary text-white py-3">
                            <h4 class="mb-0">
                                <i class="fas fa-tasks me-2"></i>
                                Gestión de Contenido
                            </h4>
                        </div>
                        <div class="card-body p-4">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <a href="{% url 'miapp:pasante_gestion_recursos' %}" class="btn btn-success w-100 py-3">
                                        <i class="fas fa-book me-2"></i>
                                        Gestionar Recursos
                                    </a>
                                    <p class="text-muted small mt-2 mb-0">Crear y editar recursos públicos para todos los usuarios</p>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <a href="{% url 'miapp:pasante_gestionar_herramientas' %}" class="btn btn-primary w-100 py-3">
                                        <i class="fas fa-tools me-2"></i>
                                        Gestionar Herramientas
                                    </a>
                                    <p class="text-muted small mt-2 mb-0">Administrar herramientas y ejercicios prácticos</p>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <a href="{% url 'miapp:pasante_consultas' %}" class="btn btn-warning w-100 py-3">
                                        <i class="fas fa-envelope me-2"></i>
                                        Ver Consultas
                                    </a>
                                    <p class="text-muted small mt-2 mb-0">Responder consultas y dudas de los pacientes</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gestión de Tests y Contenido Personalizado - NUEVA SECCIÓN -->
            <div class="row mb-5">
                <div class="col-12">
                    <div class="card feature-card">
                        <div class="card-header bg-success text-white py-3">
                            <h4 class="mb-0">
                                <i class="fas fa-user-graduate me-2"></i>
                                Gestión de Tests y Contenido Personalizado
                            </h4>
                        </div>
                        <div class="card-body p-4">
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card border-primary h-100">
                                        <div class="card-body text-center p-4">
                                            <i class="fas fa-chart-line fa-3x text-primary mb-3"></i>
                                            <h5 class="card-title text-primary mb-3">Resultados de Tests</h5>
                                            <p class="card-text mb-4">
                                                Revisa los resultados detallados de los tests psicológicos completados por los pacientes. 
                                                Analiza sus respuestas específicas para entender sus necesidades emocionales.
                                            </p>
                                            <a href="{% url 'miapp:ver_resultados_pasante' %}" class="btn btn-primary btn-lg w-100">
                                                <i class="fas fa-search me-2"></i>
                                                Ver Resultados Detallados
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <div class="card border-success h-100">
                                        <div class="card-body text-center p-4">
                                            <i class="fas fa-file-medical-alt fa-3x text-success mb-3"></i>
                                            <h5 class="card-title text-success mb-3">Contenido Personalizado</h5>
                                            <p class="card-text mb-4">
                                                Crea contenido específico para cada paciente basado en sus resultados. 
                                                Videos, artículos y ejercicios adaptados a sus necesidades particulares.
                                            </p>
                                            <div class="alert alert-info small">
                                                <i class="fas fa-info-circle me-1"></i>
                                                Disponible desde la página de resultados
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Información de Tests Recientes -->
            <div class="row">
                <div class="col-12">
                    <div class="card feature-card">
                        <div class="card-header bg-info text-white py-3">
                            <h4 class="mb-0">
                                <i class="fas fa-bell me-2"></i>
                                Actividad Reciente
                            </h4>
                        </div>
                        <div class="card-body p-4">
                            <div class="row text-center">
                                <div class="col-md-4 mb-3">
                                    <div class="activity-item p-3">
                                        <i class="fas fa-user-check fa-2x text-primary mb-2"></i>
                                        <h6>Pacientes Activos</h6>
                                        <p class="mb-0 text-muted">1 paciente completó tests</p>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="activity-item p-3">
                                        <i class="fas fa-clipboard-check fa-2x text-success mb-2"></i>
                                        <h6>Tests Completados</h6>
                                        <p class="mb-0 text-muted">8 evaluaciones realizadas</p>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="activity-item p-3">
                                        <i class="fas fa-chart-pie fa-2x text-warning mb-2"></i>
                                        <h6>Contenido Pendiente</h6>
                                        <p class="mb-0 text-muted">Personaliza según resultados</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

